<system>
  workers 4
</system>

<source>
  @type syslog
  port 5140
  bind 0.0.0.0
  format none
  message_length_limit 8192
  tag syslog
</source>

<match syslog.*.*>
  @type http
  endpoint http://OpenObserve:5080/api/default/default/_json
  content_type json
  json_array true

  # ログはリアルタイムで見たい
  flush_mode immediate
  num_threads 4
  flush_thread_count 4

  buffer_type memory
  buffer_chunk_limit 256m
  buffer_queue_limit 4096
  flush_interval 1s

  try_flush_interval 0.1
  retry_max_interval 5s		# 再試行の最大間隔
                            # 失敗する度に間隔が延びていくが、最大は 5s
  retry_limit 300           # 300回書き込みに失敗したらログを捨てる
  retry_wait 1
  max_retry_wait 5
  <auth>
    method basic
    username root@root.root
    password root
  </auth>
</match>
